<!DOCTYPE html>
<html>
<head>
    <title>FIREBASE CONNECTION TEST</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>body{font-family:sans-serif;padding:20px;text-align:center;background:#111;color:#fff;}button{padding:20px;font-size:20px;cursor:pointer;background:#0f0;font-weight:bold;border:none;border-radius:10px;}</style>
</head>
<body>
    <h2>⚡ TES KONEKSI FIREBASE ⚡</h2>
    <p id="status">Menunggu status...</p>
    
    <button onclick="kirimTes()">KIRIM SINYAL TEST</button>
    <br><br>
    <div id="output" style="font-size:30px;color:yellow;">...</div>

    <script>
        // ==========================================
        // ⚠️ PASTE CONFIG FIREBASE DISINI ⚠️
        // ==========================================
        const firebaseConfig = {
  apiKey: "AIzaSyDQ6jBWPxaItR4LntBwdviM5BAGxhd2N7Q",
  authDomain: "vipotpsystem.firebaseapp.com",
  databaseURL: "https://vipotpsystem-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "vipotpsystem",
  storageBucket: "vipotpsystem.firebasestorage.app",
  messagingSenderId: "1041472357696",
  appId: "1:1041472357696:web:d3070f47a3c263657da6a5"
};
        // ==========================================

        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.database();
            const info = document.getElementById('status');
            const out = document.getElementById('output');

            // Cek Koneksi
            const connectedRef = db.ref(".info/connected");
            connectedRef.on("value", (snap) => {
                if (snap.val() === true) {
                    info.innerHTML = "✅ TERHUBUNG KE SERVER!";
                    info.style.color = "#00ff88";
                } else {
                    info.innerHTML = "❌ GAGAL KONEK (CEK RULES / CONFIG)!";
                    info.style.color = "red";
                }
            });

            // Dengerin Data
            db.ref('test_signal').on('value', (snap) => {
                const val = snap.val();
                if(val) {
                    out.innerText = "PESAN MASUK: " + val;
                    // Bunyi Beep
                    new Audio('https://media.geeksforgeeks.org/wp-content/uploads/20190531135120/beep.mp3').play();
                }
            });

            // Fungsi Kirim
            window.kirimTes = function() {
                const acak = Math.floor(Math.random() * 1000);
                db.ref('test_signal').set("Halo " + acak);
                alert("Sinyal dikirim! Cek HP atau Tab lain.");
            }

        } catch(e) {
            alert("CONFIG ERROR! Pastikan copas config benar.");
        }
    </script>
</body>
</html>
